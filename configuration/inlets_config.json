{
    "overture_addresses": {
        "name": "addresses",
        "asset_type": "inlet",
        "fetch_type": "overture_duckdb",
        "interaction": "interface",
        "alterations": {
            "canonicalize": [
                {
                    "concat": " ",
                    "from": [
                        "number"
                    ],
                    "to": "name"
                }
            ]
        },
	"data_type": "geojson",
	 "inpath_template": "SET s3_region='us-west-2'; SELECT  * EXCLUDE geometry, ST_AsGeoJSON(ST_MakeEnvelope(bbox.xmin, bbox.ymin, bbox.xmax, bbox.ymax)) as geom FROM   read_parquet('s3://overturemaps-us-west-2/release/2025-04-23.0/theme=addresses/type=*/*', filename=true, hive_partitioning=1) WHERE  bbox.xmin > {west}  AND bbox.xmax < {east}  AND bbox.ymin > {south}  AND bbox.ymax < {north}  AND street != 'NONE';",
	"attribution": {
        "url": "https://portal.opentopography.org/api/terms",
            "description": "Overture", 
            "license": "https://portal.opentopography.org/api/terms",
            "citation": "https://portal.opentopography.org/api/terms"
	}
    },
    "overture_buildings": {
        "name": "raw_buildings",
	"asset_type": "inlet",
        "fetch_type": "overture_duckdb",
        "interaction": "interface",
	"alterations": {
            "canonicalize": [
		{
                    "to": "name",
                    "from": []}
            ],
	    "vector_width": {
		"default": 5
            }
	},
	"data_type": "geojson",
	"inpath_template": "SET s3_region='us-west-2';\nSELECT\n  * EXCLUDE geometry,  ST_AsGeoJSON(ST_GeomFromWKB(geometry)) as geom\nFROM\n  read_parquet('s3://overturemaps-us-west-2/release/2025-04-23.0/theme=buildings/type=building/*', filename=true, hive_partitioning=1)\nWHERE\n  bbox.xmin > {west}\n  AND bbox.xmax < {east}\n  AND bbox.ymin > {south}\n  AND bbox.ymax < {north}\n",
      "outpath_template": "/staging/raw_buildings.geojson",
	"attribution": {
        "url": "https://portal.opentopography.org/api/terms",
            "description": "Overture", 
            "license": "https://portal.opentopography.org/api/terms",
            "citation": "https://portal.opentopography.org/api/terms"
	}
    },
    "local_parcels": {
        "name": "parcels",
        "asset_type": "inlet", 
        "interaction": "download",
        "fetch_type": "local_ogr",
		"geometry": "dataswale",
        "data_type": "geojson",
        "feature_type": "polygon",
		"inpath_template": "mendocino_parcels.geojson",
        "attribution": {
            "url": "https://batch.openaddresses.io/job/611646#map=8.86/39.7393/-123.8213",
            "description": "Open Addresses",
            "license": "https://www.usgs.gov/information-policies-and-instructions/copyrights-and-usage",
            "citation": "https://www.sciencebase.gov/catalog/item/5e8111111111111111111111"
          }
    },
    "local_tsunami": {
        "name": "tsunami",
        "asset_type": "inlet", 
        "interaction": "download",
        "fetch_type": "local_ogr",
	"geometry": "dataswale",
        "data_type": "geojson",
        "feature_type": "polygon",
	"inpath_template": "tsunami.geojson",
	 "alterations": {
	     "vector_width": {
		 "default": 5
	     },
	     "canonicalize": [{"to": "name", "from":[], "default": "Tsunami Risk Zone"}]
	 },
        "attribution": {
            "url": "https://batch.openaddresses.io/job/611646#map=8.86/39.7393/-123.8213",
            "description": "Open Addresses",
            "license": "https://www.usgs.gov/information-policies-and-instructions/copyrights-and-usage",
            "citation": "https://www.sciencebase.gov/catalog/item/5e8111111111111111111111"
          }
    },
    
    "internal_roads": {
        "name": "internal_roads",
        "asset_type": "inlet",
	"access": ["internal", "admin"],
        "interaction": "interface",
        "fetch_type": "local_ogr",
		"geometry": "dataswale",
        "data_type": "geojson",
        "feature_type": "line",
	    "inpath_template": "westport_lidar_roads.geojson",
	    "alterations": {
			"vector_width": {"default": 5}
	    },
        "attribution": {
            "url": "https://batch.openaddresses.io/job/611646#map=8.86/39.7393/-123.8213",
            "description": "Open Addresses",
            "license": "https://www.usgs.gov/information-policies-and-instructions/copyrights-and-usage",
            "citation": "https://www.sciencebase.gov/catalog/item/5e8111111111111111111111"
          }
    },

	"local_milemarkers": {
        "name": "milemarkers",
        "asset_type": "inlet", 
        "interaction": "download",
        "fetch_type": "local_ogr",
		"geometry": "dataswale",
        "data_type": "geojson",
        "feature_type": "point",
		"inpath_template": "postmiles_tenth.geojson",
        "attribution": {
            "url": "https://batch.openaddresses.io/job/611646#map=8.86/39.7393/-123.8213",
            "description": "Open Addresses",
            "license": "https://www.usgs.gov/information-policies-and-instructions/copyrights-and-usage",
            "citation": "https://www.sciencebase.gov/catalog/item/5e8111111111111111111111"
          },
		"alterations": {	
		"canonicalize": [
		    {
			"to": "name",
			"from": ["PMc"],
			"remove_prefix": []
		    }
		],
		"vector_width": {
		    "default": 3
		},
	"require":  [
		    ["endswith", ["0.0", "5.0"]],
		    ["equals", [
			["91.0", "Callbox #911 mm 91.08"],
			["89.6","Callbox #896 mm 89.63"],
			["87.1","Callbox #878 mm 87.15"],
			["85.7","Callbox #860 mm 85.74"],
			["84.0","Callbox #840 mm 84.0"],
			["81.6","Callbox #817 mm 81.62"],
			["79.1","Callbox #790 mm 79.12"],
			["76.5","Callbox #768 mm 76.57"],
			["71.8","Callbox #714 mm 71.84"]
			]]
			]
		    
			}
		},	
    "local_helilandings": {
        "name": "helilandings_delta",
        "asset_type": "inlet", 
        "interaction": "interface",
        "fetch_type": "local_ogr",
        "data_type": "geojson",
        "feature_type": "point",
        "alterations": {
            "vector_width": {
		"default": 10
            }
        },
	    "inpath_template": "westport_helilandings.geojson",
        "outpath_template": "/helilandings_delta",
        "attribution": {
            "url": "https://www.sciencebase.gov/catalog/item/5e8111111111111111111111",
            "description": "USGS National Hydrography Dataset (NHD) Flowline Layer",
            "license": "https://www.usgs.gov/information-policies-and-instructions/copyrights-and-usage",
            "citation": "https://www.sciencebase.gov/catalog/item/5e8111111111111111111111"
          }
        },
    "local_hydrants": {
        "name": "hydrants",
        "asset_type": "inlet", 
		"symbol": "extra/half-circle",
        "interaction": "interface",
        "fetch_type": "local_ogr",
        "data_type": "geojson",
        "feature_type": "point",
		"inpath_template": "westport_hydrants.geojson",
        "attribution": {
            "url": "https://www.sciencebase.gov/catalog/item/5e8111111111111111111111",
            "description": "USGS National Hydrography Dataset (NHD) Flowline Layer",
            "license": "https://www.usgs.gov/information-policies-and-instructions/copyrights-and-usage",
            "citation": "https://www.sciencebase.gov/catalog/item/5e8111111111111111111111"
          }
    },
    "local_campgrounds": {
        "name": "campgrounds",
        "asset_type": "inlet", 
	"symbol": {"png": "tent.png"},
        "interaction": "interface",
        "fetch_type": "local_ogr",
        "data_type": "geojson",
        "feature_type": "point",
	"inpath_template": "westport_campsites.geojson",
	 "alterations": {
	     "vector_width": {
		 "default": 5
	     },
	     "canonicalize": [{"to": "name", "from":["CampNumber"], "default": "?"}]
	 },
	
        "attribution": {
            "url": "https://www.sciencebase.gov/catalog/item/5e8111111111111111111111",
            "description": "USGS National Hydrography Dataset (NHD) Flowline Layer",
            "license": "https://www.usgs.gov/information-policies-and-instructions/copyrights-and-usage",
            "citation": "https://www.sciencebase.gov/catalog/item/5e8111111111111111111111"
        }
    },

    "local_turnouts": {
        "name": "turnouts",
        "asset_type": "inlet", 
	"symbol": "extra/half-circle",
        "interaction": "interface",
        "fetch_type": "local_ogr",
        "data_type": "geojson",
        "feature_type": "point",
	"inpath_template": "westport_turnouts.geojson",
        "attribution": {
            "url": "https://www.sciencebase.gov/catalog/item/5e8111111111111111111111",
            "description": "USGS National Hydrography Dataset (NHD) Flowline Layer",
            "license": "https://www.usgs.gov/information-policies-and-instructions/copyrights-and-usage",
            "citation": "https://www.sciencebase.gov/catalog/item/5e8111111111111111111111"
          }
    },
    "opentopo_dem":  {
	"asset_type": "inlet",
	"fetch_type": "fetch_url",
	"interaction": "import",
	"data_type": "tiff",
	"inpath_template": "https://portal.opentopography.org/API/globaldem?demtype=COP30&south={south}&north={north}&west={west}&east={east}&outputFormat=GTiff&API_Key=b53534ba23d967feedbae2c7f85bfc4b",
	"outpath_template": "/staging/dem.tiff",
	"attribution": {
            "url": "https://portal.opentopography.org/api/terms",
            "description": "Open Topography's Global DEM",
            "license": "https://portal.opentopography.org/api/terms",
            "citation": "https://portal.opentopography.org/api/terms"
	}
    },
    "dem": {
	"name": "dem",
	"asset_type": "inlet",
	"fetch_type": "fetch_url",
	"interaction": "import",
	"data_type": "tiff",
	"inpath_template": "https://portal.opentopography.org/API/globaldem?demtype=COP30&south={south}&north={north}&west={west}&east={east}&outputFormat=GTiff&API_Key=b53534ba23d967feedbae2c7f85bfc4b",
	"outpath_template": "/staging/dem.tiff",
	"attribution": {
	    "url": "https://portal.opentopography.org/api/terms",
	    "description": "Open Topography's Global DEM",
	    "license": "https://portal.opentopography.org/api/terms",
	    "citation": "https://portal.opentopography.org/api/terms"
	}
    },
    "derived_hillshade": {
        "name": "hillshade",
        "asset_type": "eddy",
        "fetch_type": "hillshade",
        "data_type": "tiff",
        "resample": 5000,
	"intensity": 0.5,
        "inpath_template": "/staging/dem.tiff",
        "outpath_template": "/staging/hillshade.tiff",
        "attribution": {
            "url": "https://www.scvfd.fireatlas.org",
            "description": "Hillshade derived from DEM",
            "license": "https://www.scvfd.fireatlas.org",
            "citation": "https://www.scvfd.fireatlas.org"
        }
    },
    "gdal_contours": {
        "name": "gdal_contours",
	"color": [2, 219, 9],
	"interval": 20,
        "vector_width": 2,
        "asset_type": "eddy",
        "interaction": "backend",
        "fetch_type": "contours",
        "data_type": "geojson",
        "add_labels": false,
        "alterations": {
	    "vector_width": {"default": 2},
	    "label_attribute": "elevation",
	    "canonicalize": {"to": "name", "from": "elevation", "default": ""}
        },
        "attribution": {
            "url": "https://www.scvfd.fireatlas.org",
	    "description": "Merged road vector data",
	    "license": "https://www.scvfd.fireatlas.org",
	    "citation": "https://www.scvfd.fireatlas.org"
        }
    },
    "overture_roads":  {
	"asset_type": "inlet",
	"fetch_type": "overture_duckdb",
	"interaction": "import",
	"data_type": "geojson",
	"out_layer": "roads",
	"color": [110, 110, 255],
	"inpath_template": "SET s3_region='us-west-2';\nSELECT\n  * EXCLUDE geometry, names.primary AS primary_name, ST_AsGeoJSON(ST_GeomFromWKB(geometry)) as geom\nFROM\n  read_parquet('s3://overturemaps-us-west-2/release/2025-04-23.0/theme=transportation/type=segment/*', filename=true, hive_partitioning=1)\nWHERE\n  bbox.xmin > {west}\n  AND bbox.xmax < {east}\n  AND bbox.ymin > {south}\n  AND bbox.ymax < {north}\n  AND\n  LIST_CONTAINS(['primary', 'secondary', 'tertiary', 'service', 'residential'], class)\n",
	"outpath_template": "overture_roads.geojson",
	"attribution": {
	    "url": "https://portal.opentopography.org/api/terms",
	    "description": "Open Topography's Global DEM",
	    "license": "https://portal.opentopography.org/api/terms",
	    "citation": "https://portal.opentopography.org/api/terms"
	},
	"alterations": {
	    "canonicalize": [
		{
		    "to": "name",
		    "from": [
			"primary_name",
			"FULLRDNAME"
		    ],
		    "remove_prefix": []
		}
	    ],
	    "vector_width": {
		"attribute": "class",
		"map": {
		    "primary": 9,
		    "secondary": 7,
		    "tertiary": 5
		},
		"default": 4
	    }
	}
    },			
    "local_hillshade":  {
	"asset_type": "inlet",
	"fetch_type": "local_raster",
	"interaction": "import",
	"data_type": "tiff",
	"resample_width": 5000,
	"out_layer": "lidar_basemap",
	"inpath_template": "westport_dem_2m_hillshade.tiff",
	"attribution": {
	    "url": "https://portal.opentopography.org/api/terms",
	    "description": "Open Topography's Global DEM",
	    "license": "https://portal.opentopography.org/api/terms",
	    "citation": "https://portal.opentopography.org/api/terms"
	}
    },
    "nhd_creeks":  {
	"asset_type": "inlet",
	"fetch_type": "local_ogr",
	"interaction": "import",
	"data_type": "geojson",
	"name": "nhd_creeks",
	"description": "External creek vector source",
	"feature_type": "linestring",
	"color": [110, 110, 255],
	"layer": "NHDFlowline",
	"inpath_template": "NHD_H_California_State_GPKG.gpkg",
	"geometry": "dataswale",
	"alterations": {
	    "canonicalize": [
		{
		    "to": "name",
		    "from": [
			"gnis_name"
		    ],
		    "remove_prefix": []
		}
	    ],
	    "vector_width": {
		"attribute": "fcode_description",
		"map": {
		    "Stream/River: Hydrographic Category = Ephemeral": 3,
		    "Stream/River: Hydrographic Category = Perennial": 4,
		    "Stream/River: Hydrographic Category = Intermittent": 2,
		    "Artificial Path": 1
		},
		"default": 1
	    }
	},
	"attribution": {
	    "url": "https://www.usgs.gov/nhd",
	    "description": "USGS National Hydrography Dataset",
	    "license": "https://www.usgs.gov/nhd/license",
	    "citation": "USGS NHD"
	} 
    },
    "webmap":  {
	"asset_type": "outlet",
	"name": "webmap",
	"fetch_type": "webmap",
	"interaction": "interface",
	"attribution": {
	    "url": "https://portal.opentopography.org/api/terms",
	    "description": "Open Topography's Global DEM",
	    "license": "https://portal.opentopography.org/api/terms",
	    "citation": "https://portal.opentopography.org/api/terms"
	}
    },
    
    "webedit": {
	"name": "webedit",
	"asset_type": "outlet",
	"fetch_type": "webedit",
	"interaction": "backend",
	"data_type": "html",
	"layers": [
	    "ponds",
	    "roads",
	    "helilanding"
	],
	"outpath_template": "/webedit/",
	"attribution": {
	    "url": "https://maplibre.org",
	    "description": "Terra draw tool for the atlas.",
	    "license": "https://maplibre.org",
	    "citation": "MapLibre"
	}
    },
    "static_html":  {
	"asset_type": "outlet",
	"fetch_type": "html",
	"interaction": "backend",
	"attribution": {
	    "url": "https://portal.opentopography.org/api/terms",
	    "description": "Open Topography's Global DEM",
	    "license": "https://portal.opentopography.org/api/terms",
	    "citation": "https://portal.opentopography.org/api/terms"
	}
    },
    
    "runbook": {
	"asset_type": "outlet",
	"layers": [
            "hillshade",
            "contours",
            "creeks",
            "tsunami",
            "buildings",
            "helilanding",
            "overture_roads"],
        "fetch_type": "runbook",
        "interaction": "interface",
        "data_type": "html",
        "outpath_template": "/runbook/{name}_page_{i}.html",
        "page_name_template": "{name}_page_{i}",
        "attribution": {
            "url": "https://www.scvfd.fireatlas.org",
            "description": "Runbook of the atlas, a linked set of specific submap/diagram pages.",
            "license": "https://www.scvfd.fireatlas.org",
            "citation": "https://www.scvfd.fireatlas.org"
        }               
    },
    
    
    "sqlquery": {
	"asset_type": "outlet",
	"name": "sqlquery",
	"fetch_type": "sqlquery",
	"interaction": "interface",
	"data_type": "html",
	"access": "internal",
	"attribution": {
            "url": "https://www.scvfd.fireatlas.org",
            "description": "SQL Query Interface",
            "license": "https://www.scvfd.fireatlas.org",
            "citation": "https://www.scvfd.fireatlas.org"
	}
    }
}
			



