<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>geopdf_generator.py</title>
  <link rel="stylesheet" href="pycco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <div class='section'>
    <div class='docs'><h1>geopdf_generator.py</h1></div>
  </div>
  <div class='clearall'>
  <div class='section' id='section-0'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-0'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Optional</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">logging</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-1'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-1'>#</a>
      </div>
      <p>Configure logging</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-2'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-2'>#</a>
      </div>
      <p>Generate GeoPDF files from TIFF and GeoJSON layers.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">class</span> <span class="nc">GeoPDFGenerator</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-3'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-3'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-4'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-4'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;output&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">output_dir</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-5'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-5'>#</a>
      </div>
      <p>Create a GeoPDF from TIFF and GeoJSON layers.</p>
<p>Args:
    tiff_path: Path to the TIFF file (raster layer)
    geojson_layers: List of GeoJSON layer configurations
    output_filename: Name of the output PDF file
    title: PDF title
    author: PDF author
    subject: PDF subject
    creator: PDF creator
    dpi: Output resolution in DPI
    page_size: Page size (A4, A3, Letter, etc.)
    margin_mm: Margin in millimeters</p>
<p>Returns:
    Path to the generated GeoPDF file</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">create_geopdf</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">tiff_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">geojson_layers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span>
        <span class="n">output_filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Atlas Map&quot;</span><span class="p">,</span>
        <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Generated by Atlas&quot;</span><span class="p">,</span>
        <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Geographic Data&quot;</span><span class="p">,</span>
        <span class="n">creator</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Atlas System&quot;</span><span class="p">,</span>
        <span class="n">dpi</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">300</span><span class="p">,</span>
        <span class="n">page_size</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;A4&quot;</span><span class="p">,</span>
        <span class="n">margin_mm</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-6'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-6'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>        
        <span class="n">output_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_dir</span> <span class="o">/</span> <span class="n">output_filename</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-7'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-7'>#</a>
      </div>
      <p>Step 1: Create a VRT (Virtual Dataset) to combine layers</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">vrt_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_vrt</span><span class="p">(</span><span class="n">tiff_path</span><span class="p">,</span> <span class="n">geojson_layers</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-8'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-8'>#</a>
      </div>
      <p>Step 2: Generate the GeoPDF using gdal2tiles or gdal_translate</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">_generate_geopdf</span><span class="p">(</span><span class="n">vrt_path</span><span class="p">,</span> <span class="n">output_path</span><span class="p">,</span> <span class="n">dpi</span><span class="p">,</span> <span class="n">page_size</span><span class="p">,</span> <span class="n">margin_mm</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-9'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-9'>#</a>
      </div>
      <p>Step 3: Add PDF metadata</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="bp">self</span><span class="o">.</span><span class="n">_add_pdf_metadata</span><span class="p">(</span><span class="n">output_path</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">author</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">creator</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-10'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-10'>#</a>
      </div>
      <p>Clean up temporary files</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="n">vrt_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">vrt_path</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>
            
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;GeoPDF created successfully: </span><span class="si">{</span><span class="n">output_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">output_path</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-11'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-11'>#</a>
      </div>
      <p>Create a VRT file that combines the TIFF and GeoJSON layers.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">_create_vrt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tiff_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">geojson_layers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-12'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-12'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>        
        <span class="n">vrt_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_dir</span> <span class="o">/</span> <span class="s2">&quot;temp.vrt&quot;</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-13'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-13'>#</a>
      </div>
      <p>Start VRT content</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">vrt_content</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;&lt;OGRVRTDataSource&gt;&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;  &lt;OGRVRTLayer name=&quot;raster&quot;&gt;&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;    &lt;SrcDataSource&gt;</span><span class="si">{</span><span class="n">tiff_path</span><span class="si">}</span><span class="s1">&lt;/SrcDataSource&gt;&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;    &lt;LayerSRS&gt;EPSG:4326&lt;/LayerSRS&gt;&#39;</span><span class="p">,</span>
            <span class="sa">f</span><span class="s1">&#39;  &lt;/OGRVRTLayer&gt;&#39;</span>
        <span class="p">]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-14'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-14'>#</a>
      </div>
      <p>Add GeoJSON layers</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">layer_config</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">geojson_layers</span><span class="p">):</span>
            <span class="n">layer_name</span> <span class="o">=</span> <span class="n">layer_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;vector_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">geojson_path</span> <span class="o">=</span> <span class="n">layer_config</span><span class="p">[</span><span class="s1">&#39;path&#39;</span><span class="p">]</span>
            <span class="n">style_config</span> <span class="o">=</span> <span class="n">layer_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;style&#39;</span><span class="p">,</span> <span class="p">{})</span>
            
            <span class="n">vrt_content</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
                <span class="sa">f</span><span class="s1">&#39;  &lt;OGRVRTLayer name=&quot;</span><span class="si">{</span><span class="n">layer_name</span><span class="si">}</span><span class="s1">&quot;&gt;&#39;</span><span class="p">,</span>
                <span class="sa">f</span><span class="s1">&#39;    &lt;SrcDataSource&gt;</span><span class="si">{</span><span class="n">geojson_path</span><span class="si">}</span><span class="s1">&lt;/SrcDataSource&gt;&#39;</span><span class="p">,</span>
                <span class="sa">f</span><span class="s1">&#39;    &lt;LayerSRS&gt;EPSG:4326&lt;/LayerSRS&gt;&#39;</span><span class="p">,</span>
                <span class="sa">f</span><span class="s1">&#39;    &lt;GeometryType&gt;wkbUnknown&lt;/GeometryType&gt;&#39;</span>
            <span class="p">])</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-15'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-15'>#</a>
      </div>
      <p>Add styling if provided</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">if</span> <span class="n">style_config</span><span class="p">:</span>
                <span class="n">vrt_content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;    &lt;Style&gt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_create_style_xml</span><span class="p">(</span><span class="n">style_config</span><span class="p">)</span><span class="si">}</span><span class="s1">&lt;/Style&gt;&#39;</span><span class="p">)</span>
            
            <span class="n">vrt_content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;  &lt;/OGRVRTLayer&gt;&#39;</span><span class="p">)</span>
        
        <span class="n">vrt_content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;&lt;/OGRVRTDataSource&gt;&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-16'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-16'>#</a>
      </div>
      <p>Write VRT file</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">vrt_path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">vrt_content</span><span class="p">))</span>
        
        <span class="k">return</span> <span class="n">vrt_path</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-17'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-17'>#</a>
      </div>
      <p>Create OGR style XML from configuration.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">_create_style_xml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style_config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-18'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-18'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>        
        <span class="n">style_parts</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="k">if</span> <span class="s1">&#39;color&#39;</span> <span class="ow">in</span> <span class="n">style_config</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">style_config</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">color</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
                <span class="n">hex_color</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;#</span><span class="si">{</span><span class="n">r</span><span class="si">:</span><span class="s2">02x</span><span class="si">}{</span><span class="n">g</span><span class="si">:</span><span class="s2">02x</span><span class="si">}{</span><span class="n">b</span><span class="si">:</span><span class="s2">02x</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">hex_color</span> <span class="o">=</span> <span class="n">color</span>
            
            <span class="n">style_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&lt;Pen&gt;&#39;</span><span class="p">)</span>
            <span class="n">style_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;  &lt;GraphicStroke&gt;&#39;</span><span class="p">)</span>
            <span class="n">style_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;    &lt;Graphic&gt;&#39;</span><span class="p">)</span>
            <span class="n">style_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;      &lt;Mark&gt;&#39;</span><span class="p">)</span>
            <span class="n">style_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;        &lt;WellKnownName&gt;circle&lt;/WellKnownName&gt;&#39;</span><span class="p">)</span>
            <span class="n">style_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;        &lt;Fill&gt;&#39;</span><span class="p">)</span>
            <span class="n">style_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;          &lt;CssParameter name=&quot;fill&quot;&gt;</span><span class="si">{</span><span class="n">hex_color</span><span class="si">}</span><span class="s1">&lt;/CssParameter&gt;&#39;</span><span class="p">)</span>
            <span class="n">style_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;        &lt;/Fill&gt;&#39;</span><span class="p">)</span>
            <span class="n">style_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;      &lt;/Mark&gt;&#39;</span><span class="p">)</span>
            <span class="n">style_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;    &lt;/Graphic&gt;&#39;</span><span class="p">)</span>
            <span class="n">style_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;  &lt;/GraphicStroke&gt;&#39;</span><span class="p">)</span>
            <span class="n">style_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&lt;/Pen&gt;&#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="s1">&#39;width&#39;</span> <span class="ow">in</span> <span class="n">style_config</span><span class="p">:</span>
            <span class="n">style_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&lt;Pen&gt;&#39;</span><span class="p">)</span>
            <span class="n">style_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;  &lt;CssParameter name=&quot;stroke-width&quot;&gt;</span><span class="si">{</span><span class="n">style_config</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">&lt;/CssParameter&gt;&#39;</span><span class="p">)</span>
            <span class="n">style_parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&lt;/Pen&gt;&#39;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">style_parts</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-19'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-19'>#</a>
      </div>
      <p>Generate the actual GeoPDF file.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">_generate_geopdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vrt_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">output_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">dpi</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">page_size</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">margin_mm</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-20'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-20'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-21'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-21'>#</a>
      </div>
      <p>Method 1: Using gdal2tiles with PDF output</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">try</span><span class="p">:</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s1">&#39;gdal2tiles&#39;</span><span class="p">,</span>
                <span class="s1">&#39;--profile=geodetic&#39;</span><span class="p">,</span>
                <span class="sa">f</span><span class="s1">&#39;--zoom=10-15&#39;</span><span class="p">,</span>
                <span class="sa">f</span><span class="s1">&#39;--resampling=near&#39;</span><span class="p">,</span>
                <span class="s1">&#39;--webviewer=none&#39;</span><span class="p">,</span>
                <span class="s1">&#39;--title=Atlas Map&#39;</span><span class="p">,</span>
                <span class="s1">&#39;--url=http://example.com/&#39;</span><span class="p">,</span>
                <span class="s1">&#39;--pdf&#39;</span><span class="p">,</span>
                <span class="nb">str</span><span class="p">(</span><span class="n">vrt_path</span><span class="p">),</span>
                <span class="nb">str</span><span class="p">(</span><span class="n">output_path</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="n">output_path</span><span class="o">.</span><span class="n">stem</span><span class="p">)</span>
            <span class="p">]</span>
            
            <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;GeoPDF generated using gdal2tiles&quot;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-22'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-22'>#</a>
      </div>
      <p>except subprocess.CalledProcessError as e:</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;gdal2tiles failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Falling back to gdal_translate method&quot;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-23'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-23'>#</a>
      </div>
      <p>Method 2: Using gdal_translate with PDF driver</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="bp">self</span><span class="o">.</span><span class="n">_generate_geopdf_gdal_translate</span><span class="p">(</span><span class="n">vrt_path</span><span class="p">,</span> <span class="n">output_path</span><span class="p">,</span> <span class="n">dpi</span><span class="p">,</span> <span class="n">page_size</span><span class="p">,</span> <span class="n">margin_mm</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-24'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-24'>#</a>
      </div>
      <p>Generate GeoPDF using gdal_translate as fallback.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">_generate_geopdf_gdal_translate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vrt_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">output_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">dpi</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">page_size</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">margin_mm</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-25'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-25'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-26'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-26'>#</a>
      </div>
      <p>Create a simple PDF using gdal_translate</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">cmd</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;gdal_translate&#39;</span><span class="p">,</span>
            <span class="s1">&#39;-of&#39;</span><span class="p">,</span> <span class="s1">&#39;PDF&#39;</span><span class="p">,</span>
            <span class="s1">&#39;-co&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;DPI=</span><span class="si">{</span><span class="n">dpi</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="s1">&#39;-co&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;PAGE_SIZE=</span><span class="si">{</span><span class="n">page_size</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="s1">&#39;-co&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;MARGIN=</span><span class="si">{</span><span class="n">margin_mm</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="nb">str</span><span class="p">(</span><span class="n">vrt_path</span><span class="p">),</span>
            <span class="nb">str</span><span class="p">(</span><span class="n">output_path</span><span class="p">)</span>
        <span class="p">]</span>
        
        <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;GeoPDF generated using gdal_translate&quot;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-27'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-27'>#</a>
      </div>
      <p>Add metadata to the PDF file.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">_add_pdf_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pdf_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">author</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">creator</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-28'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-28'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-29'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-29'>#</a>
      </div>
      <p>This would require a PDF library like PyPDF2 or reportlab
For now, we&rsquo;ll use gdal_translate with metadata options</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">temp_path</span> <span class="o">=</span> <span class="n">pdf_path</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="s1">&#39;.temp.pdf&#39;</span><span class="p">)</span>
        
        <span class="n">cmd</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;gdal_translate&#39;</span><span class="p">,</span>
            <span class="s1">&#39;-of&#39;</span><span class="p">,</span> <span class="s1">&#39;PDF&#39;</span><span class="p">,</span>
            <span class="s1">&#39;-co&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;TITLE=</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="s1">&#39;-co&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;AUTHOR=</span><span class="si">{</span><span class="n">author</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="s1">&#39;-co&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;SUBJECT=</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="s1">&#39;-co&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;CREATOR=</span><span class="si">{</span><span class="n">creator</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="nb">str</span><span class="p">(</span><span class="n">pdf_path</span><span class="p">),</span>
            <span class="nb">str</span><span class="p">(</span><span class="n">temp_path</span><span class="p">)</span>
        <span class="p">]</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">temp_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">pdf_path</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;PDF metadata added successfully&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CalledProcessError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to add PDF metadata: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">temp_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                <span class="n">temp_path</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-30'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-30'>#</a>
      </div>
      <p>Create a GeoPDF for an atlas based on its configuration.</p>
<p>Args:
    config: Atlas configuration dictionary
    atlas_name: Name of the atlas
    output_dir: Output directory for the PDF</p>
<p>Returns:
    Path to the generated GeoPDF file</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">create_atlas_geopdf</span><span class="p">(</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">atlas_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">output_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;output&quot;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-31'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-31'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    
    <span class="n">generator</span> <span class="o">=</span> <span class="n">GeoPDFGenerator</span><span class="p">(</span><span class="n">output_dir</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-32'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-32'>#</a>
      </div>
      <p>Find the TIFF layer (usually the basemap)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">tiff_path</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;dataswale&#39;</span><span class="p">][</span><span class="s1">&#39;layers&#39;</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;geometry_type&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;raster&#39;</span><span class="p">:</span>
            <span class="n">layer_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;data_root&#39;</span><span class="p">])</span> <span class="o">/</span> <span class="n">atlas_name</span> <span class="o">/</span> <span class="s1">&#39;staging&#39;</span> <span class="o">/</span> <span class="s1">&#39;layers&#39;</span> <span class="o">/</span> <span class="n">layer</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">.tiff&quot;</span>
            <span class="k">if</span> <span class="n">layer_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                <span class="n">tiff_path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">layer_path</span><span class="p">)</span>
                <span class="k">break</span>
    
    <span class="k">if</span> <span class="ow">not</span> <span class="n">tiff_path</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No TIFF layer found in atlas configuration&quot;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-33'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-33'>#</a>
      </div>
      <p>Prepare GeoJSON layers</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">geojson_layers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;dataswale&#39;</span><span class="p">][</span><span class="s1">&#39;layers&#39;</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;geometry_type&#39;</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;polygon&#39;</span><span class="p">,</span> <span class="s1">&#39;linestring&#39;</span><span class="p">,</span> <span class="s1">&#39;point&#39;</span><span class="p">]:</span>
            <span class="n">layer_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;data_root&#39;</span><span class="p">])</span> <span class="o">/</span> <span class="n">atlas_name</span> <span class="o">/</span> <span class="s1">&#39;staging&#39;</span> <span class="o">/</span> <span class="s1">&#39;layers&#39;</span> <span class="o">/</span> <span class="n">layer</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">layer</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">.geojson&quot;</span>
            <span class="k">if</span> <span class="n">layer_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                <span class="n">geojson_layers</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">layer</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;path&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">layer_path</span><span class="p">),</span>
                    <span class="s1">&#39;style&#39;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">]),</span>
                        <span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="n">layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;width&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="p">}</span>
                <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-34'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-34'>#</a>
      </div>
      <p>Generate the GeoPDF</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">output_filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">atlas_name</span><span class="si">}</span><span class="s2">_atlas.pdf&quot;</span>
    <span class="k">return</span> <span class="n">generator</span><span class="o">.</span><span class="n">create_geopdf</span><span class="p">(</span>
        <span class="n">tiff_path</span><span class="o">=</span><span class="n">tiff_path</span><span class="p">,</span>
        <span class="n">geojson_layers</span><span class="o">=</span><span class="n">geojson_layers</span><span class="p">,</span>
        <span class="n">output_filename</span><span class="o">=</span><span class="n">output_filename</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">atlas_name</span><span class="si">}</span><span class="s2"> Fire Atlas&quot;</span><span class="p">,</span>
        <span class="n">author</span><span class="o">=</span><span class="s2">&quot;Atlas System&quot;</span><span class="p">,</span>
        <span class="n">subject</span><span class="o">=</span><span class="s2">&quot;Geographic Data&quot;</span><span class="p">,</span>
        <span class="n">creator</span><span class="o">=</span><span class="s2">&quot;Atlas System&quot;</span>
    <span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-35'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-35'>#</a>
      </div>
      <p>Example usage</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-36'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-36'>#</a>
      </div>
      <p>Example configuration</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">example_config</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;wildwood&quot;</span><span class="p">,</span>
        <span class="s2">&quot;data_root&quot;</span><span class="p">:</span> <span class="s2">&quot;/path/to/data&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dataswale&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;layers&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;basemap&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;geometry_type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster&quot;</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;roads&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;geometry_type&quot;</span><span class="p">:</span> <span class="s2">&quot;linestring&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                    <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="mi">2</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;buildings&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;geometry_type&quot;</span><span class="p">:</span> <span class="s2">&quot;polygon&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">]</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-37'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-37'>#</a>
      </div>
      <p>Create GeoPDF</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">pdf_path</span> <span class="o">=</span> <span class="n">create_atlas_geopdf</span><span class="p">(</span><span class="n">example_config</span><span class="p">,</span> <span class="s2">&quot;wildwood&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;GeoPDF created: </span><span class="si">{</span><span class="n">pdf_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

</pre></div>
    </div>
  </div>
  <div class='clearall'></div>
</div>
</body>
